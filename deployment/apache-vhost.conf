<VirtualHost *:80>
    ServerName your-domain.com
    ServerAlias www.your-domain.com
    
    # Document root pointing to your static files
    DocumentRoot /var/www/html/gmail_ext_front
    
    # Directory configuration
    <Directory /var/www/html/gmail_ext_front>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Enable compression for better performance
        <IfModule mod_deflate.c>
            AddOutputFilterByType DEFLATE text/plain text/html text/xml text/css text/javascript application/javascript application/x-javascript application/json
        </IfModule>
        
        # Set cache headers for static assets
        <LocationMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
            Header set Cache-Control "max-age=31536000, public"
        </LocationMatch>
        
        # Handle client-side routing (SPA)
        RewriteEngine On
        RewriteBase /
        
        # Handle Angular and React Router requests
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_URI} !^/api/
        RewriteRule ^.*$ /index.html [L]
        
        # Handle API requests (proxy to your backend)
        RewriteCond %{REQUEST_URI} ^/api/(.*)$
        RewriteRule ^api/(.*)$ https://api.omeeai.com/om/%1 [P,L]
    </Directory>
    
    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/gmail_ext_front_error.log
    CustomLog ${APACHE_LOG_DIR}/gmail_ext_front_access.log combined
</VirtualHost>

# If you want to add HTTPS support (recommended)
<VirtualHost *:443>
    ServerName your-domain.com
    ServerAlias www.your-domain.com
    
    DocumentRoot /var/www/html/gmail_ext_front
    
    # SSL Configuration (add your SSL certificates)
    # SSLEngine on
    # SSLCertificateFile /path/to/your/certificate.crt
    # SSLCertificateKeyFile /path/to/your/private.key
    
    # Directory configuration (same as above)
    <Directory /var/www/html/gmail_ext_front>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        RewriteEngine On
        RewriteBase /
        
        RewriteCond %{REQUEST_FILENAME} ! -f
        RewriteCond %{REQUEST_FILENAME} ! -d
        RewriteCond %{REQUEST_URI} !^/api/
        RewriteRule ^.*$ /index.html [L]
        
        RewriteCond %{REQUEST_URI} ^/api/(.*)$
        RewriteRule ^api/(.*)$ https://api.omeeai.com/om/%1 [P,L]
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/ gmail_ext_front_ssl_error.log
    CustomLog ${APACHE_LOG_DIR}/gmail_ext_front_ssl_access.log combined
</VirtualHost>
