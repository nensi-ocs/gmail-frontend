"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{6476:function(e,t,r){var i=r(5893),n=r(7294),o=r(948),a=r(1903);let s=(0,o.ZP)(a.Z)(e=>{let{theme:t}=e;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:t.spacing(1),fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(t.palette.customColors.main,", 0.2)"),transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(t.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:t.palette.error.main},"&.Mui-focused":{boxShadow:t.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:t.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:t.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:t.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:t.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:t.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:t.palette.error.main},"&.Mui-error":{borderColor:t.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(t.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:t.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:t.spacing(1,0,0),color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,"&.Mui-error":{color:t.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),l=(0,n.forwardRef)((e,t)=>{let{size:r="small",InputLabelProps:n,...o}=e;return(0,i.jsx)(s,{size:r,inputRef:t,...o,variant:"filled",InputLabelProps:{...n,shrink:!0}})});t.Z=l},3258:function(e,t,r){r.r(t);var i=r(5893),n=r(7294),o=r(7357),a=r(6886),s=r(5050),l=r(3321),d=r(7720),p=r(5670),c=r(5861),u=r(4267),m=r(6242),x=r(6476),h=r(6664),f=r(9878),g=r(9824),y=r(3478),b=r(7660),Z=r(4054),j=r(3841),C=r(8360),M=r(8972),v=r(6310),S=r(7536),I=r(7533),B=r(6455),w=r.n(B),P=r(6501),z=r(1163),_=r(6036);let k=v.Ry().shape({address:v.Z_().required("Address is a required field"),city:v.Z_().required("City is a required field"),zipCode:v.Z_().required("Zip Code is a required field"),state:v.Z_().required("State is a required field"),country:v.Z_().required("Country is a required field")}),A={address:"",city:"",zipCode:"",state:"",country:""},R=()=>{let e=(0,z.useRouter)(),t=(0,h.useStripe)(),r=(0,h.useElements)(),{setUser:v,user:B,setPlandetails:R,plandetails:T,pricing:W}=(0,n.useContext)(y.V),[q,E]=(0,n.useState)(null),{plan:L,subscriptionType:Q}=e.query,G=(0,b.Yu)();(0,n.useEffect)(()=>{let t=async()=>{if(W){if(L&&Q&&Array.isArray(null==W?void 0:W.plans)){let e=null==W?void 0:W.plans.find(e=>e.name===L);if(e){let t=e.price.find(e=>e.duration===Q);t&&R({...e,price:t.amount,duration:t.duration})}}else await e.push("/pricing")}};t()},[L,Q,W,R]);let{control:H,handleSubmit:N,formState:{errors:F}}=(0,S.cI)({defaultValues:A,mode:"onSubmit",resolver:(0,I.X)(k)});w().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{container:"my-swal-toast-container"}});let O=async e=>{if(!t||!r)return;let i=r.getElement(h.CardElement);try{let{error:r,paymentMethod:s}=await t.createPaymentMethod({type:"card",card:i,billing_details:{name:"".concat(B.first_name," ").concat(B.last_name)}});if(r){E(r.message);return}let l={paymentMethodId:s.id,email:B.email,name:"".concat(B.first_name," ").concat(B.last_name),address:e.address,city:e.city,zipCode:e.zipCode,state:e.state,country:e.country,plan:L,subscriptionType:Q};try{let e=await g.Z.stripePayment(l);200===e.status&&"active"===e.data.status&&P.ZP.success("Payment successfully processed")}catch(t){var n,o,a;let e=(null===(n=null==t?void 0:null===(o=t.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.error[0])||void 0===n?void 0:n.message)||"Something went wrong";P.ZP.error(e)}}catch(e){console.error("There was a problem with the fetch operation:",e),P.ZP.error("Error: ".concat(e.message||e))}},[X,$]=(0,n.useState)("1");return(0,i.jsx)(i.Fragment,{children:W?(0,i.jsx)(m.Z,{children:(0,i.jsx)(u.Z,{children:(0,i.jsxs)(a.ZP,{container:!0,spacing:6,children:[(0,i.jsxs)(a.ZP,{item:!0,xs:12,lg:7,children:[(0,i.jsx)(c.Z,{variant:"h3",children:"Checkout"}),(0,i.jsxs)(p.ZP,{value:X,className:"card",children:[(0,i.jsx)(c.Z,{variant:"h4",children:"Billing Details"}),(0,i.jsx)(a.ZP,{container:!0,sx:{mt:6},children:(0,i.jsx)(a.ZP,{item:!0,md:12,xs:12,children:(0,i.jsx)(s.Z,{value:"1",sx:{p:0},children:(0,i.jsxs)(a.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(a.ZP,{item:!0,xs:12,children:(0,i.jsx)(S.Qr,{name:"address",control:H,render:e=>{let{field:t}=e;return(0,i.jsx)(x.Z,{fullWidth:!0,label:"Address",...t,error:!!F.address,helperText:F.address?F.address.message:""})}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(S.Qr,{name:"city",control:H,render:e=>{let{field:t}=e;return(0,i.jsx)(x.Z,{fullWidth:!0,label:"City",...t,error:!!F.city,helperText:F.city?F.city.message:""})}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(S.Qr,{name:"zipCode",control:H,render:e=>{let{field:t}=e;return(0,i.jsx)(x.Z,{fullWidth:!0,label:"Zip code",...t,error:!!F.zipCode,helperText:F.zipCode?F.zipCode.message:""})}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(S.Qr,{name:"state",control:H,render:e=>{let{field:t}=e;return(0,i.jsx)(x.Z,{fullWidth:!0,label:"State / Province / Region",...t,error:!!F.state,helperText:F.state?F.state.message:""})}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(S.Qr,{name:"country",control:H,render:e=>{let{field:t}=e;return(0,i.jsxs)(Z.Z,{fullWidth:!0,children:[(0,i.jsx)(j.Z,{id:"country-select-label",children:"Country"}),(0,i.jsx)(C.Z,{labelId:"country-select-label",id:"country-select",...t,label:"Country",error:!!F.country,onChange:e=>t.onChange(e.target.value),MenuProps:{sx:{maxHeight:300}},sx:{mt:1},children:G.map(e=>(0,i.jsx)(M.Z,{value:e.code,children:e.name},e.code))}),F.country&&(0,i.jsx)(c.Z,{color:"error",children:F.country.message})]})}})})]})})})}),(0,i.jsx)(c.Z,{variant:"h4",sx:{mt:6},children:"Credit Card Info"}),(0,i.jsx)(a.ZP,{container:!0,sx:{mt:6},children:(0,i.jsx)(a.ZP,{item:!0,md:12,xs:12,children:(0,i.jsx)(a.ZP,{container:!0,spacing:4,children:(0,i.jsxs)(a.ZP,{item:!0,xs:12,children:[(0,i.jsx)(c.Z,{mb:1,children:"Credit or debit card"}),(0,i.jsx)(o.Z,{sx:{padding:"10px 20px",borderRadius:"4px",border:"1px solid #ccc",boxShadow:"inset 0 1px 1px rgba(0, 0, 0, .075)",transition:"border-color ease-in-out .15s, box-shadow ease-in-out .15s"},children:(0,i.jsx)(h.CardElement,{options:{style:{base:{fontSize:"16px",color:"#32325d",fontFamily:"Roboto, sans-serif"}}}})}),q&&(0,i.jsx)(c.Z,{color:"error",sx:{mt:1},children:q})]})})})})]})]}),(0,i.jsx)(a.ZP,{item:!0,xs:10,lg:5,children:(0,i.jsx)(o.Z,{sx:{borderRadius:1,border:e=>"1px solid ".concat(e.palette.divider)},children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(c.Z,{sx:{mb:4},variant:"h6",children:"Order Summary"}),(0,i.jsxs)(c.Z,{variant:"body2",children:["It can help you manage and service orders before,",(0,i.jsx)("br",{}),"during and after fulfilment"]}),(0,i.jsxs)(o.Z,{sx:{mt:4,mb:4,display:"flex",flexDirection:"column",color:"text.secondary",backgroundColor:"background.default",borderRadius:1,p:3},children:[(0,i.jsx)(c.Z,{variant:"body2",sx:{mb:1},children:"A simple start for everyone"}),(0,i.jsxs)(c.Z,{variant:"h1",children:["$ ",null==T?void 0:T.price]})]}),(0,i.jsxs)(o.Z,{sx:{mb:4,rowGap:1,columnGap:4,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)(c.Z,{sx:{fontWeight:500},children:"Subtotal"}),(0,i.jsxs)(c.Z,{sx:{fontWeight:500},children:["$",null==T?void 0:T.price]})]}),(0,i.jsx)(d.Z,{sx:{my:"0 !important"}}),(0,i.jsxs)(o.Z,{sx:{mt:4,mb:4,rowGap:1,columnGap:4,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)(c.Z,{sx:{fontWeight:500},children:"Total"}),(0,i.jsxs)(c.Z,{sx:{fontWeight:500},children:["$",null==T?void 0:T.price]})]}),(0,i.jsxs)(l.Z,{fullWidth:!0,variant:"contained",sx:{mb:2},onClick:N(O),children:["proceed with payment",(0,i.jsx)(f.Z,{icon:"tabler:arrow-right",style:{marginLeft:"7px"}})]})]})})})]})})}):(0,i.jsx)(_.default,{isLoading:!0})})};t.default=R}}]);